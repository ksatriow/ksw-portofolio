<!DOCTYPE html>
<html lang="en">
<%- include('../partials/userheader') %>

    <body class="auth-body">
        <div class="auth-container">
            <div class="container">
                <div class="row justify-content-center align-items-center min-vh-100">
                    <div class="col-lg-5 col-md-7">
                        <div class="glass-card auth-card">
                            <div class="text-center mb-4">
                                <h2 class="text-gradient">Welcome Back</h2>
                                <p class="text-muted">Login to your account</p>
                            </div>

                            <% if (message.length> 0) { %>
                                <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                    <i class="fas fa-exclamation-circle me-2"></i>
                                    <%= message %>
                                        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert"
                                            aria-label="Close"></button>
                                </div>
                                <% } %>

                                    <form action="/user/login" method="post" id="loginForm">
                                        <div class="mb-3">
                                            <label for="username" class="form-label">Username</label>
                                            <input type="text" name="username" id="username"
                                                class="form-control glass-input" placeholder="Enter your username"
                                                required minlength="3" autocomplete="username">
                                        </div>

                                        <div class="mb-3">
                                            <label for="password" class="form-label">Password</label>
                                            <input type="password" name="password" id="password"
                                                class="form-control glass-input" placeholder="Enter your password"
                                                required minlength="8" autocomplete="current-password">
                                        </div>

                                        <div class="mb-3 form-check">
                                            <input type="checkbox" class="form-check-input" id="remember-me"
                                                name="remember-me">
                                            <label class="form-check-label text-muted" for="remember-me">
                                                Remember me for 7 days
                                            </label>
                                        </div>

                                        <button type="submit" class="btn btn-gradient w-100 mb-3">
                                            <span class="btn-text">Login</span>
                                            <span class="btn-loader d-none">
                                                <span class="spinner-border spinner-border-sm me-2" role="status"
                                                    aria-hidden="true"></span>
                                                Logging in...
                                            </span>
                                        </button>
                                    </form>

                                    <!-- Registration disabled for personal portfolio -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            // Add loading state on form submit
            document.getElementById('loginForm').addEventListener('submit', function () {
                const btn = this.querySelector('button[type="submit"]');
                btn.querySelector('.btn-text').classList.add('d-none');
                btn.querySelector('.btn-loader').classList.remove('d-none');
                btn.disabled = true;
            });
        </script>
    </body>

</html>